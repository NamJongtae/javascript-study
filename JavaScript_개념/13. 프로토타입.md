# 13. í”„ë¡œí† íƒ€ì…

## 1. í”„ë¡œí† íƒ€ì…ì˜ ê°œë…

### í”„ë¡œí† íƒ€ì… prototype

- ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ”Â **í”„ë¡œí† íƒ€ì…**Â ê¸°ë°˜ì˜ ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ ì§€ì›í•˜ëŠ” ì–¸ì–´
- ì˜¤ëŠ˜ë‚ ì—ëŠ” í´ë˜ìŠ¤ê°€ ë” ë„ë¦¬ ì‚¬ìš©ë˜ì§€ë§Œ, ì‚¬ìš©í•˜ê¸°ì— ë”°ë¼ ë³´ë‹¤ ê°•ë ¥í•˜ê³  íš¨ìœ¨ì 

**ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  ê°ì²´ëŠ”Â `Prototype`ì„ ê°€ì§**

â€¢ `[[Prototype]]`Â í¼ì³ì„œ ì‚´í´ë³¼ ê²ƒ

â€¢ ë¹ˆ ê°ì²´ì„ì—ë„ ìœ„ì˜ ë©”ì„œë“œë“¤ì´ ì‚¬ìš© ê°€ëŠ¥í•œ ê²ƒì€ í”„ë¡œí† íƒ€ì… ë•Œë¬¸

```javascript
const obj = {};

console.log(obj);
```

```javascript
console.log(obj.toString());
```

```javascript
console.log(obj.valueOf());
```

**`Object`Â - ëª¨ë“  ê²ƒì˜ ì¡°ìƒ**

- ì•„ë˜ ê° ê°ì²´ì˜Â `[[Prototype]]`ì˜Â `[[Prototype]]`ì´Â `Object`ì„ í™•ì¸
- ê°Â `[[Prototype]]`ì˜ ë©”ì„œë“œë“¤ í™•ì¸

```javascript
console.log(new String(""));
```

```javascript
console.log([]);
```

```javascript
console.log(new Map());
```

- `constructor`Â í•­ëª©ì—ì„œ ê°ê°ì˜ ìƒì„±ì í™•ì¸ ê°€ëŠ¥
  - ê°ì²´ ë¦¬í„°ëŸ´(`{}`Â ë“±)ì˜ ìƒì„±ìëŠ”Â `Object()`ì„ ì•Œ ìˆ˜ ìˆìŒ

```javascript
console.log({});
```

### **í”„ë¡œí† íƒ€ì… ì²´ì¸**

- íŠ¹ì • ê°ì²´ì— í˜¸ì¶œëœ í”„ë¡œí¼í‹°ê°€ ì—†ë‹¤ë©´ í”„ë¡œí† íƒ€ì…ì„ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°
- ì˜ˆ: Arrayì—ëŠ”Â `valueOf`ê°€ ì—†ì§€ë§Œ ê·¸ í”„ë¡œí† íƒ€ì…ì¸Â `Object`ì—ëŠ” ìˆìœ¼ë¯€ë¡œ í˜¸ì¶œ ê°€ëŠ¥

![proto](https://github.com/NamJongtae/javascript-study/assets/113427991/64bf5596-74a4-4226-b336-6c916610e951)

### **ì½”ë“œë¡œ í”„ë¡œí† íƒ€ì…ì— ì ‘ê·¼í•˜ê¸°**

**`__proto__`Â ì ‘ê·¼ì ì‚¬ìš© -Â *Object.prototypeì˜ í”„ë¡œí¼í‹°***

- [ğŸ‘‰ MDN ë¬¸ì„œ ë³´ê¸°](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/proto)
- âš ï¸Â **Deprecated**Â - ì‚¬ë¼ì§ˆ ê¸°ëŠ¥, ì‚¬ìš© ê¶Œì¥ë˜ì§€ ì•ŠìŒ. ìœ„ì˜ ë§í¬ í™•ì¸

```javascript
console.log({}.__proto__);
```

```javascript
console.log(new Number(2).__proto__);
```

```javascript
console.log([1, 2, 3].__proto__);
```

- **ê°™ì€ ì¢…ë¥˜ëŠ”Â í”„ë¡œí† íƒ€ì… ê³µìœ Â í™•ì¸**

```javascript
console.log({}.__proto__ === { x: 1, y: 2 }.__proto__);
```

```javascript
console.log([1, 2, 3].__proto__ === [4, 5].__proto__);
```

```javascript
console.log(new String("ê°€ë‚˜ë‹¤").__proto__ === new String("ABC").__proto__);
```

- **ìµœìƒìœ„, ê³µí†µì¡°ìƒì€Â `Object`ì„ í™•ì¸**

```javascript
console.log(
  {}.__proto__ === [].__proto__,
  {}.__proto__ === new Number(0).__proto__,
  [].__proto__ === new Number(0).__proto__
);
```

```javascript
console.log(
  {}.__proto__ === [].__proto__.__proto__,
  {}.__proto__ === new Number(0).__proto__.__proto__,
  [].__proto__.__proto__ === new Number(0).__proto__.__proto__
);
```

```javascript
// â­ ê·¸ ìœ„ë¡œëŠ” null
console.log({}.__proto__.__proto__);
```

**`Object.getPrototypeOf`**

- ìˆ˜ì •í•  ë•ŒëŠ”Â `Object.setPrototypeOf`Â ì‚¬ìš©
- â­Â `__proto__`Â ëŒ€ì‹  ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ê²ƒ

```javascript
console.log(Object.getPrototypeOf({}));
```

```javascript
// ì¸ìŠ¤í„´ìŠ¤ë“¤ì— ê³µìœ ë  í”„ë¡œí† íƒ€ì…ì— ë‹¤ìŒê³¼ ê°™ì´ ì ‘ê·¼
console.log(Person.prototype);
```

```javascript
const hong = new Person("í™ê¸¸ë™");

console.log(hong);
```

- ìƒì •ì í•¨ìˆ˜ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ë¹ŒíŠ¸ì¸ ê°ì²´

```javascript
console.log(Math.prototype);
```

### **ì¸ìŠ¤í„´ìŠ¤ vs í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹°**

```javascript
function Animal(name, eat) {
  this.name = name;
  this.eat = eat;
  this.introduce = function () {
    return `ë‚˜ëŠ” ${this.name} ${eat}ë™ë¬¼`;
  };
}

const lion = new Animal("lion", "ìœ¡ì‹");
```

```javascript
// prototypeë¥¼ í†µí•´ í•¨ìˆ˜ ì¶”ê°€

Animal.prototype.hunt = function () {
  return `${this.name}ì´ ì‚¬ëƒ¥ì¤‘`;
};

console.log(lion.hunt());
console.log(new Animal("rabbit", "ì´ˆì‹").hunt());
```

- `introduce`Â : ë§Œë“¤ì–´ì§€ëŠ” ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ê°ê° ìˆìŒ
- `hunt`Â : í”„ë¡œí† íƒ€ì…ì—ë§Œ ìˆìŒ -Â **ë©”ëª¨ë¦¬ ì ˆì•½**

```javascript
// ê° í•¨ìˆ˜ê°€ ì†í•œ ë ˆë²¨ í™•ì¸
console.log(lion);
```

- **ë”°ë¼ì„œ ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ìµœì†Œí™”í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±**

```javascript
function Animal(name, eat) {
  this.name = name;
  this.eat = eat;
}

// ê³µí†µëœ ìš”ì†Œë“¤ì€ í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹°ë¡œ
Animal.prototype.introduce = function () {
  return `ë‚˜ëŠ” ${this.name} ${eat}ë™ë¬¼`;
};

Animal.prototype.hunt = function () {
  return `${this.name}ì´ ì‚¬ëƒ¥ì¤‘`;
};
```

```javascript
const lion = new YalcoChicken("lion", "ìœ¡ì‹");
const rabbit = new YalcoChicken("rabbit", "ì´ˆì‹");

console.log(lion.introduce());
console.log(rabbit.introEng());
```

```javascript
// ì¸ìŠ¤í„´ìŠ¤ ë ˆë²¨ê³¼ í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹°ë“¤ ë¹„êµ
console.log(lion, rabbit);
```

**í´ë˜ìŠ¤ì—ë„ ì ìš© ê°€ëŠ¥**

```javascript
class Dog {
  constructor(name) {
    this.name = name;
  }
}

Dog.prototype.sound = "ë©ë©";
Dog.prototype.bark = function () {
  // ë©”ì„œë“œë¡œ ë§Œë“œëŠ” ê²ƒê³¼ ê°™ìŒ
  console.log(this.sound);
};

const badugi = new Dog("ë°”ë‘‘ì´");

badugi.bark();
```

```javascript
console.log(badugi);
```

## 2. í”„ë¡œí† íƒ€ì…ê³¼ ìƒì†

### **í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ìƒì†í•˜ê¸°**

**`Object.create`Â ë©”ì„œë“œ**

- **ì£¼ì–´ì§„ ê²ƒì„ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ê°–ëŠ” ê°ì²´**ë¥¼ ìƒì„±
- [ğŸ‘‰ MDN ë¬¸ì„œ ë³´ê¸°](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/create)

```javascript
function Bird(name, sound) {
  this.name = name;
  this.sound = sound;
}
Bird.prototype.fly = function () {
  console.log(`${this.name} ${this.sound} ë¹„í–‰ì¤‘`);
};

function Eagle(name, sound, prey) {
  this.name = name;
  this.sound = sound;
  this.prey = prey;
}

// âš ï¸ ìˆœì„œ ì£¼ì˜! ìƒì†ì„ ë¨¼ì € ë°›ìŒ
Eagle.prototype = Object.create(Bird.prototype);
// Eagle.prototype = Bird.prototype; // ğŸ’¡ ë¹„êµí•´ ë³¼ ê²ƒ

// ìƒì† ì´í›„ ìì‹ ì˜ í”„ë¡œí† íƒ€ì… ì‘ì„±
Eagle.prototype.hunt = function () {
  console.log(`${this.name} ${this.prey} ì‚¬ëƒ¥ì¤‘`);
};
```

```javascript
const bird = new Bird("ìƒˆëŒì´", "íŒŒë‹¥íŒŒë‹¥");
const eagle = new Eagle("ë…ëŒì´", "í‘¸ë“œë•", "í† ë¼");

// ìƒì† êµ¬ì¡° í™•ì¸
console.log(bird);
console.log(eagle);
```

```javascript
console.log(eagle instanceof Bird, bird instanceof Eagle);
```

```javascript
bird.fly();
eagle.fly();
eagle.hunt();
```

- ìƒì†ì„ ë¨¼ì € í•˜ê³  ìì²´ í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹° ì…ë ¥
- `Object.create...`Â ëŒ€ì‹ Â `Bird.prototype`Â ëŒ€ì… ê²°ê³¼ ë¹„êµ -Â *eagleê³¼ bird ëª¨ë‘ í™•ì¸*

### **ë¶€ëª¨ì˜ ìƒì„±ì í™œìš©í•˜ê¸°**

- ìƒì„±ìì—ì„œ ì¤‘ë³µë˜ëŠ” ë¶€ë¶„ ìœ„ì„
- `class`ì—ì„œëŠ”Â `constructor`ì—ì„œÂ `super`Â ì‚¬ìš©

```javascript
function Bird(name, sound) {
  this.name = name;
  this.sound = sound;
}
Bird.prototype.fly = function () {
  console.log(`${this.name} ${this.sound} ë¹„í–‰ì¤‘`);
};

function Eagle(name, sound, prey) {
  // ğŸ’¡ call í˜¸ì¶œë°©ì‹ ì‚¬ìš©
  Bird.call(this, name, sound);
  this.prey = prey;
}

Eagle.prototype = Object.create(Bird.prototype);

Eagle.prototype.hunt = function () {
  console.log(`${this.name} ${this.prey} ì‚¬ëƒ¥ì¤‘`);
};
```

```javascript
const eagle = new Eagle("ë…ëŒì´", "í‘¸ë“œë•", "í† ë¼");
console.log(eagle);
```

```javascript
eagle.fly();
eagle.hunt();
```

### **í´ë˜ìŠ¤ë¡œ êµ¬í˜„**

í´ë˜ìŠ¤ ì—­ì‹œ í”„ë¡œí† íƒ€ì…ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë¨

**í´ë˜ìŠ¤ì™€ í”„ë¡œí† íƒ€ì…**

- í´ë˜ìŠ¤ì˜ ë©”ì„œë“œëŠ” í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë¨
- `extends`Â - í”„ë¡œí† íƒ€ì… ìƒì†ë„ë¥¼ ë§Œë“¦

```javascript
function AAA() {
  this.field = 1;
  this.run = function () {
    return 1;
  };
}

class BBB {
  field = 1;
  run = function () {
    return 1;
  };
}

class CCC {
  field = 1;
  run() {
    return 1;
  }
}

console.log(new AAA()); // ì¸ìŠ¤í„´ìŠ¤ì— ì†í•¨
console.log(new BBB()); // ì¸ìŠ¤í„´ìŠ¤ì— ì†í•¨
console.log(new CCC()); // í”„ë¡œí† íƒ€ì…ì— ì†í•¨
```

- `run`Â í•¨ìˆ˜ ë˜ëŠ” ë©”ì„œë“œê°€ ì†í•œ ê³³ ë¹„êµ
- í•„ë“œëŠ” ì–‘ìª½ ëª¨ë‘ ì¸ìŠ¤í„´ìŠ¤ì— ì†í•¨

```javascript
// â™»ï¸ ìƒˆë¡œê³ ì¹¨ í›„ ì‹¤í–‰

class Bird {
  constructor(name, sound) {
    this.name = name;
    this.sound = sound;
  }
  fly() {
    console.log(`${this.name} ${this.sound} ë¹„í–‰ì¤‘`);
  }
}

class Eagle extends Bird {
  constructor(name, sound, prey) {
    super(name, sound);
    this.prey = prey;
  }
  hunt() {
    console.log(`${this.name} ${this.prey} ì‚¬ëƒ¥ì¤‘`);
  }
}
```

```javascript
const bird = new Bird("ìƒˆëŒì´", "íŒŒë‹¥íŒŒë‹¥");
const eagle = new Eagle("ë…ëŒì´", "í‘¸ë“œë•", "í† ë¼");

console.log(bird);
console.log(eagle);
```

```javascript
bird.fly();
eagle.fly();
eagle.hunt();
```

**ì¸ìŠ¤í„´ìŠ¤ì˜ í´ë˜ìŠ¤/ìƒì„±ìí•¨ìˆ˜ ì´ë¦„ ì¶œë ¥**

```javascript
console.log(
  Object.getPrototypeOf(bird).constructor.name,
  Object.getPrototypeOf(eagle).constructor.name,
  Object.getPrototypeOf(Object.getPrototypeOf(eagle)).constructor.name
);
```

### **MixinÂ -Â `Object.assign`ìœ¼ë¡œ ì¡°ë¦½í•˜ê¸°**

- ìƒì† - í•œ ë¶€ëª¨ë¡œë¶€í„°ë§Œ ë¬¼ë ¤ë°›ìŒ
- ë¯¹ìŠ¤ì¸ - ì—¬ëŸ¿ì„ ì¡°í•©í•˜ì—¬ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ

```javascript
const runner = {
  run: function () {
    console.log(`${this.name} ì§ˆì£¼ì¤‘`);
  },
};
const swimmer = {
  swim: function () {
    console.log(`${this.name} ìˆ˜ì˜ì¤‘`);
  },
};
const flyer = {
  fly: function () {
    console.log(`${this.name} ë¹„í–‰ì¤‘`);
  },
};
const hunter = {
  hunt: function () {
    console.log(`${this.name} ì‚¬ëƒ¥ì¤‘`);
  },
};
```

```javascript
class Owl {
  constructor(name) {
    this.name = name;
  }
}

class FlyingFish {
  constructor(name) {
    this.name = name;
  }
}

class PolarBear {
  constructor(name) {
    this.name = name;
  }
}
```

```javascript
Object.assign(Owl.prototype, flyer, hunter);
Object.assign(FlyingFish.prototype, flyer, swimmer);
Object.assign(PolarBear.prototype, runner, swimmer, hunter);
```

```javascript
const owl = new Owl("ë¶€ì—‰ì´");
const f_fish = new FlyingFish("ë‚ ì¹˜");
const p_bear = new PolarBear("ë¶ê·¹ê³°");

console.log(owl);
console.log(f_fish);
console.log(p_bear);
```

```javascript
owl.fly();
owl.hunt();

f_fish.swim();
f_fish.fly();

p_bear.run();
p_bear.swim();
p_bear.hunt();
```
